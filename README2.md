# üë®‚Äçüç≥ AI-–®–µ—Ñ ‚Äî Telegram-–±–æ—Ç –Ω–∞ YandexGPT

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
**AI:** [Yandex AI Studio](https://yandex.cloud/ru/docs/ai-studio) (YandexGPT)  
**–û–ø–ª–∞—Ç–∞:** [–ÆKassa](https://yookassa.ru)  
**Telegram:** [python-telegram-bot 20+](https://python-telegram-bot.org)

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ai_chef_bot/
‚îú‚îÄ‚îÄ bot.py             # –•–µ–Ω–¥–ª–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –∏ –∫–Ω–æ–ø–æ–∫, —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ yandex_client.py   # YandexGPT —á–µ—Ä–µ–∑ Yandex AI Studio SDK + LRU-–∫—ç—à
‚îú‚îÄ‚îÄ database.py        # SQLite (aiosqlite): users, recipes, payments
‚îú‚îÄ‚îÄ payment.py         # –ÆKassa: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îú‚îÄ‚îÄ config.py          # –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
‚îú‚îÄ‚îÄ requirements.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ Dockerfile         # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.example       # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <your-repo>
cd ai_chef_bot
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex AI Studio

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|
| 1 | –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ [console.yandex.cloud](https://console.yandex.cloud) |
| 2 | –°–æ–∑–¥–∞–π –∏–ª–∏ –≤—ã–±–µ—Ä–∏ **–∫–∞—Ç–∞–ª–æ–≥** ‚Üí —Å–∫–æ–ø–∏—Ä—É–π **Folder ID** |
| 3 | **IAM** ‚Üí **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã** ‚Üí **–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç** |
| 4 | –ù–∞–∑–Ω–∞—á—å –∞–∫–∫–∞—É–Ω—Ç—É —Ä–æ–ª—å **`ai.languageModels.user`** |
| 5 | –û—Ç–∫—Ä–æ–π –∞–∫–∫–∞—É–Ω—Ç ‚Üí **–ö–ª—é—á–∏** ‚Üí **–°–æ–∑–¥–∞—Ç—å API-–∫–ª—é—á** ‚Üí —Å–∫–æ–ø–∏—Ä—É–π |

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [yandex.cloud/ru/docs/ai-studio/quickstart/yandexgpt](https://yandex.cloud/ru/docs/ai-studio/quickstart/yandexgpt)

### 3. –°–æ–∑–¥–∞–π `.env`

```bash
cp .env.example .env
nano .env   # –∑–∞–ø–æ–ª–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
```env
TELEGRAM_BOT_TOKEN=...    # –æ—Ç @BotFather
YANDEX_FOLDER_ID=...      # ID –∫–∞—Ç–∞–ª–æ–≥–∞ Yandex Cloud
YANDEX_API_KEY=...        # API-–∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
```

### 4. –ó–∞–ø—É—Å–∫

```bash
python bot.py
```

---

## üê≥ Docker

```bash
# –°–±–æ—Ä–∫–∞
docker build -t ai-chef-bot .

# –ó–∞–ø—É—Å–∫
docker run -d \
  --name ai-chef \
  --env-file .env \
  -v $(pwd)/data:/data \
  --restart unless-stopped \
  ai-chef-bot

# –õ–æ–≥–∏
docker logs -f ai-chef
```

---

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ [railway.app](https://railway.app)
2. **New Project** ‚Üí **Deploy from GitHub**
3. **Variables** ‚Üí –¥–æ–±–∞–≤—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.example`
4. Railway –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç `Dockerfile` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## ü§ñ –ú–æ–¥–µ–ª–∏ YandexGPT

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `YANDEX_MODEL` | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------------------------|----------|
| `yandexgpt` | Pro ‚Äî —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ |
| `yandexgpt-lite` | Lite ‚Äî –±—ã—Å—Ç—Ä–µ–µ –∏ –¥–µ—à–µ–≤–ª–µ |
| `yandexgpt-32k` | Pro —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º 32 000 —Ç–æ–∫–µ–Ω–æ–≤ |

> –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: [yandex.cloud/ru/docs/ai-studio/concepts/generation/models](https://yandex.cloud/ru/docs/ai-studio/concepts/generation/models)

---

## üí¨ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + 2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–∞ |
| `/recipe [—Ç–µ–∫—Å—Ç]` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç |
| `/balance` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å |
| `/buy` | –ö—É–ø–∏—Ç—å –ø–∞–∫–µ—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ |
| `/admin` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç–æ–ª—å–∫–æ ADMIN_IDS) |

---

## üí∞ –¢–∞—Ä–∏—Ñ—ã

| –ü–∞–∫–µ—Ç | –†–µ—Ü–µ–ø—Ç–æ–≤ | –¶–µ–Ω–∞ |
|-------|----------|------|
| ü•ó –°—Ç–∞—Ä—Ç–æ–≤—ã–π | 10 | 299 —Ä—É–±. |
| üç≥ –®–µ—Ñ | 30 | 699 —Ä—É–±. |
| üë®‚Äçüç≥ –ú–∞—Å—Ç–µ—Ä-—à–µ—Ñ | 100 | 1 999 —Ä—É–±. |

---

## ‚öôÔ∏è –ÆKassa ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

| –ö–∞—Ä—Ç–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------|-----------|
| `5555 5555 5555 4477` | –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ |
| `5555 5555 5555 4444` | –û—Ç–∫–ª–æ–Ω–µ–Ω–æ |

> –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [yookassa.ru/developers/payment-acceptance/testing](https://yookassa.ru/developers/payment-acceptance/testing/test-bank-card)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Rate limit: 1 –∑–∞–ø—Ä–æ—Å / 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π)
- –ê—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç race condition)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞: 500 —Å–∏–º–≤–æ–ª–æ–≤
